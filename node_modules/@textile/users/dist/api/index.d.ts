import { grpc } from '@improbable-eng/grpc-web';
import { GrpcConnection } from '@textile/grpc-connection';
import { ContextInterface } from '@textile/context';
import { ThreadID } from '@textile/threads-id';
/**
 * Global settings for mailboxes
 */
export declare const MailConfig: {
    ThreadName: string;
    InboxCollectionName: string;
    SentboxCollectionName: string;
};
/**
 * The status query filter of an inbox message.
 */
export declare enum Status {
    ALL = 0,
    READ = 1,
    UNREAD = 2
}
/**
 * Sentbox query options
 */
export interface SentboxListOptions {
    seek?: string;
    limit?: number;
    ascending?: boolean;
}
/**
 * Inbox query options
 */
export interface InboxListOptions {
    seek?: string;
    limit?: number;
    ascending?: boolean;
    status?: Status;
}
/**
 * The response type from getThread and listThreads
 */
export interface GetThreadResponseObj {
    isDB: boolean;
    name: string;
    id: ThreadID;
}
/**
 * The message format returned from inbox or sentbox
 */
export interface UserMessage {
    id: string;
    to: string;
    from: string;
    body: Uint8Array;
    signature: Uint8Array;
    createdAt: number;
    readAt?: number;
}
/**
 * The mailbox event type. CREATE, SAVE, or DELETE
 */
export declare enum MailboxEventType {
    CREATE = 0,
    SAVE = 1,
    DELETE = 2
}
/**
 * The event type returned from inbox and sentbox subscriptions
 */
export interface MailboxEvent {
    type: MailboxEventType;
    messageID: string;
    message?: UserMessage;
}
/**
 * @internal
 */
export declare function listThreads(api: GrpcConnection, ctx?: ContextInterface): Promise<Array<GetThreadResponseObj>>;
/**
 * @internal
 */
export declare function getThread(api: GrpcConnection, name: string, ctx?: ContextInterface): Promise<GetThreadResponseObj>;
/**
 * @internal
 */
export declare function setupMailbox(api: GrpcConnection, ctx?: ContextInterface): Promise<string>;
/**
 * @internal
 */
export declare function getMailboxID(api: GrpcConnection, ctx?: ContextInterface): Promise<string>;
/**
 * @internal
 */
export declare function sendMessage(api: GrpcConnection, from: string, to: string, toBody: Uint8Array, toSignature: Uint8Array, fromBody: Uint8Array, fromSignature: Uint8Array, ctx?: ContextInterface): Promise<UserMessage>;
/**
 * @internal
 */
export declare function listInboxMessages(api: GrpcConnection, opts?: InboxListOptions, ctx?: ContextInterface): Promise<Array<UserMessage>>;
/**
 * @internal
 */
export declare function listSentboxMessages(api: GrpcConnection, opts?: SentboxListOptions, ctx?: ContextInterface): Promise<Array<UserMessage>>;
/**
 * @internal
 */
export declare function readInboxMessage(api: GrpcConnection, id: string, ctx?: ContextInterface): Promise<{
    readAt: number;
}>;
/**
 * @internal
 */
export declare function deleteInboxMessage(api: GrpcConnection, id: string, ctx?: ContextInterface): Promise<void>;
/**
 * @internal
 */
export declare function deleteSentboxMessage(api: GrpcConnection, id: string, ctx?: ContextInterface): Promise<void>;
/**
 * @internal
 */
export declare function watchMailbox(api: GrpcConnection, id: string, box: 'inbox' | 'sentbox', callback: (reply?: MailboxEvent, err?: Error) => void, ctx?: ContextInterface): grpc.Request;
